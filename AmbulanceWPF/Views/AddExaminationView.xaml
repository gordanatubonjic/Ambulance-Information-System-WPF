<Window x:Class="AmbulanceWPF.Views.AddExaminationView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:models="clr-namespace:AmbulanceWPF.Models" 
        d:DataContext="{d:DesignInstance Type=models:Examination}"
        mc:Ignorable="d"
        Title="Add New Examination" Height="600" Width="600"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Add New Examination" FontSize="20" FontWeight="Bold" Margin="0,0,0,16"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <DatePicker SelectedDate="{Binding CheckupDate, ValidatesOnDataErrors=True}" 
                                materialDesign:HintAssist.Hint="Checkup Date" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding DoctorName, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Doctor Name" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding Summary, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Summary" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding CheckupType, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Checkup Type" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding DetailedDescription, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Detailed Description" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding Diagnosis, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Diagnosis" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding Medications, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Medications" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <DatePicker SelectedDate="{Binding NextAppointment, ValidatesOnDataErrors=True}" 
                                materialDesign:HintAssist.Hint="Next Appointment" />
                </materialDesign:Card>

                <!-- For TestResults, assuming a simple comma-separated input for simplicity -->
                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox x:Name="TestResultsTextBox" 
                             materialDesign:HintAssist.Hint="Test Results (comma-separated)" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>

                <materialDesign:Card Padding="8" Margin="0,0,0,8">
                    <TextBox Text="{Binding Notes, ValidatesOnDataErrors=True}" 
                             materialDesign:HintAssist.Hint="Notes" AcceptsReturn="True" TextWrapping="Wrap" />
                </materialDesign:Card>
            </StackPanel>
        </ScrollViewer>

        <ProgressBar Grid.Row="2" IsIndeterminate="True" Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="0,8,0,8"/>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Save" Margin="0,0,8,0" Click="Save_Click" IsEnabled="{Binding IsValid}"/>
            <Button Content="Cancel" Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>