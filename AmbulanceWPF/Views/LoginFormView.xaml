<Window x:Class="AmbulanceWPF.Views.LoginFormView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AmbulanceWPF.Views"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
        xmlns:userControl="clr-namespace:AmbulanceWPF.Views.UserControls"
        xmlns:viewmodels="clr-namespace:AmbulanceWPF.ViewModels" 
        d:DataContext="{d:DesignInstance Type=viewmodels:LoginViewModel}"
        mc:Ignorable="d"
        Title="LoginFormView"
        Height="700" 
        Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}">

    <Window.Resources>
        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Margin" Value="0,16,0,0"/>
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="40"/>
            
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

                 <Border Grid.Row="0" 
                Background="{DynamicResource MaterialDesignPrimaryDarkBrush}"
                Height="120"
                CornerRadius="0 0 20 20">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Background="#f2f2f2">
                <materialDesign:PackIcon Kind="MedicationOutline" 
                                        Width="40" 
                                        Height="40" 
                                        Foreground="#ff0000"
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Center"/>
                <TextBlock Text="{DynamicResource AppNameText}"
                          Foreground="#020202"
                          FontSize="16"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="{DynamicResource AppNameSubText}"
                          Foreground="#020202"
                          FontSize="12"
                          HorizontalAlignment="Center"
                          Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

                 <Border Grid.Row="1" 
                Margin="30"
                Padding="20"
                Background="{DynamicResource MaterialDesignCardBackground}"
                CornerRadius="8">
            <StackPanel VerticalAlignment="Center">
                 <TextBlock Text="{DynamicResource LoginHeaderText}"
                          FontSize="18"
                          FontWeight="Bold"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,30"
                          Foreground="{DynamicResource MaterialDesignBody}"/>

                 <materialDesign:Card Margin="0,0,0,20" 
                                    Padding="0"
                                    Background="Transparent">
                     
                            <TextBox x:Name="UsernameTextBox"
                             Text="{Binding Username}"
                             materialDesign:HintAssist.Hint="{DynamicResource Username}"
                            materialDesign:TextFieldAssist.HasClearButton="True"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            FontSize="14"
                            Width="400"
                            HorizontalAlignment="Left"
                            Margin="0"/>
                </materialDesign:Card>

                <materialDesign:Card Margin="0,0,0,10"
Padding="0"
Background="Transparent">
                    <Grid Height="28" Margin="0,5,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <userControl:BindablePasswordBox
                            Grid.Column="0"
                            Grid.ColumnSpan="2"
                            Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            materialDesign:HintAssist.Hint="{DynamicResource Password}"
                            Padding="0,0,32,0"
                            Visibility="{Binding IsPasswordVisible, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                        <TextBox
                            Grid.Column="0"
                            Grid.ColumnSpan="2"
                            Text="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            materialDesign:HintAssist.Hint="{DynamicResource Password}"
                            Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                            Padding="0,0,32,0"
                            FontSize="14"
                            Visibility="{Binding IsPasswordVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        <ToggleButton
                            Grid.Column="1"
                            IsChecked="{Binding IsPasswordVisible}"
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            Foreground="Gray"
                            Background="Transparent"
                            ToolTip="{DynamicResource ShowHidePasswordText}" 
                            VerticalAlignment="Top"
                            >
                            <materialDesign:PackIcon x:Name="PasswordToggleIcon" Kind="EyeOutline"/>
                        </ToggleButton>
                    </Grid>
                </materialDesign:Card>

                <Grid Margin="0,10,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    
                </Grid>
                <!-- Error Message -->
                <Border Visibility="{Binding HasErrorMessage, Converter={StaticResource BooleanToVisibilityConverter}}"
        Background="{DynamicResource MaterialDesignValidationErrorBrush}"
        CornerRadius="4"
        Padding="12,8"
        Margin="0,10,0,0">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="AlertCircle"
                                Foreground="{DynamicResource MaterialDesignErrorForeground}"
                                Width="16"
                                Height="16"
                                Margin="0,0,8,0"/>
                        <TextBlock Text="{Binding ErrorMessage}"
                  Foreground="{DynamicResource MaterialDesignErrorForeground}"
                  FontSize="13"
                  TextWrapping="Wrap"
                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Button x:Name="LoginButton"
                        Content="{DynamicResource LoginBtnText}"
                        Command="{Binding LoginCommand}"
                        Style="{StaticResource MaterialDesignRaisedDarkButton}"
                        HorizontalAlignment="Stretch"
                        Height="45"
                        FontSize="14"
                        FontWeight="Bold"
                        Margin="0,10,0,0"
                        Background="#14990B
"
                        Foreground="White"/>

                                 
            </StackPanel>
        </Border>

                 <Border Grid.Row="2" 
                Background="{DynamicResource MaterialDesignBackground}"
                Height="60">
            <TextBlock Text="{DynamicResource AppTMText}"
                      Foreground="{DynamicResource MaterialDesignBodyLight}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="10"/>
        </Border>

                 <materialDesign:Card Grid.Row="1" 
                            x:Name="LoadingCard"
                            Visibility="Collapsed"
                            Width="80"
                            Height="80"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            >
            <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                        Value="0"
                        IsIndeterminate="True"
                        Width="40"
                        Height="40"/>
        </materialDesign:Card>
    </Grid>

</Window>
